<div class="col-md-6 offset-md-3">
  <div class="card card-body">

    <h4>S'inscrire</h4>

    <form
      #f="ngForm"
      (ngSubmit)="f.form.valid && onSubmit()"
      *ngIf="!isSuccessful"
      name="form"
      novalidate
    >

      <div class="form-group">
        <label for="pseudo">Pseudo</label>
        <input
          #pseudo="ngModel"
          [(ngModel)]="registerForm.pseudo"
          [ngClass]="{ 'is-invalid': f.submitted && pseudo.errors }"
          class="form-control"
          maxlength="20"
          minlength="3"
          name="pseudo"
          required
          type="text"
        />
        <div *ngIf="pseudo.errors && f.submitted" class="invalid-feedback">
          <div *ngIf="pseudo.errors['required']">Le pseudo est obligatoire !</div>
          <div *ngIf="pseudo.errors['minlength']">
            Le pseudo doit faire au moins 3 caractères !
          </div>
          <div *ngIf="pseudo.errors['maxlength']">
            Le pseudo ne doit pas dépasser 20 caractères !
          </div>
        </div>
      </div>

      <div class="form-group">
        <label for="firstName">Prénom</label>
        <input
          #firstName="ngModel"
          [(ngModel)]="registerForm.firstName"
          [ngClass]="{ 'is-invalid': f.submitted && firstName.errors }"
          class="form-control"
          maxlength="50"
          minlength="1"
          name="firstName"
          required
          type="text"
        />
        <div *ngIf="firstName.errors && f.submitted" class="invalid-feedback">
          <div *ngIf="firstName.errors['required']">Le prénom est obligatoire !</div>
          <div *ngIf="firstName.errors['minlength']">
            Le prénom doit faire au moins 1 caractères !
          </div>
          <div *ngIf="firstName.errors['maxlength']">
            Le prénom ne doit pas dépasser 50 caractères !
          </div>
        </div>
      </div>

      <div class="form-group">
        <label for="lastName">Nom</label>
        <input
          #lastName="ngModel"
          [(ngModel)]="registerForm.lastName"
          [ngClass]="{ 'is-invalid': f.submitted && lastName.errors }"
          class="form-control"
          maxlength="50"
          minlength="1"
          name="lastName"
          required
          type="text"
        />
        <div *ngIf="lastName.errors && f.submitted" class="invalid-feedback">
          <div *ngIf="lastName.errors['required']">Le nom est obligatoire !</div>
          <div *ngIf="lastName.errors['minlength']">
            Le nom doit faire au moins 1 caractères !
          </div>
          <div *ngIf="lastName.errors['maxlength']">
            Le nom ne doit pas dépasser 50 caractères !
          </div>
        </div>
      </div>

      <div class="form-group">
        <label for="email">Email</label>
        <input
          #email="ngModel"
          [(ngModel)]="registerForm.mail"
          [ngClass]="{ 'is-invalid': f.submitted && email.errors }"
          class="form-control"
          email
          name="email"
          required
          type="email"
        />
        <div *ngIf="email.errors && f.submitted" class="invalid-feedback">
          <div *ngIf="email.errors['required']">L'email est obligatoire</div>
          <div *ngIf="email.errors['email']">
            L'email doit être une adresse mail valide !
          </div>
        </div>
      </div>

      <div class="form-group">
        <label for="password">Mot de passe</label>
        <input
          #password="ngModel"
          [(ngModel)]="registerForm.password"
          [ngClass]="{ 'is-invalid': f.submitted && password.errors }"
          class="form-control"
          minlength="6"
          name="password"
          required
          type="password"
        />
        <div *ngIf="password.errors && f.submitted" class="invalid-feedback">
          <div *ngIf="password.errors['required']">Le mot de passe est obligatoire !</div>
          <div *ngIf="password.errors['minlength']">
            Le mot de passe doit comporter au moins 6 lettres
          </div>
        </div>
      </div>

      <div class="form-group">
        <label for="birthDate">Date de naissance</label>
        <input
          #birthDate="ngModel"
          [(ngModel)]="registerForm.birthDate"
          [ngClass]="{ 'is-invalid': f.submitted && birthDate.errors }"
          class="form-control"
          id="birthDate"
          name="birthDate"
          required
          type="date"
        />
        <div *ngIf="birthDate.errors && f.submitted" class="invalid-feedback">
          <div *ngIf="birthDate.errors['required']">La date de naissance est obligatoire !</div>
        </div>
      </div>

      <div class="form-group mt-3">
        <label class="pe-2" for="activityChoice">Sport favori :</label>
        <select id="activityChoice">
          <option [ngValue]="null" disabled>Choisir un sport</option>
          <!--<option [ngValue]="1">Running</option>-->
          <option *ngFor="let sport of sports" [ngValue]="sport.id">{{sport.title}}</option>
        </select>
      </div>

      <div class="form-group mt-2">
        <button class="btn btn-primary btn-block">S'inscrire !</button>
      </div>

      <div *ngIf="f.submitted && isSignUpFailed" class="alert alert-warning">
        L'inscription a échouée !<br/>{{ errorMessage }}
      </div>
    </form>

    <div *ngIf="isSuccessful" class="alert alert-success">
      Vous êtes bien inscrit!
    </div>
  </div>
</div>
